<!DOCTYPE html>
<html data-ng-app="fruitTree">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

    <title>Letters</title>
    <script type="application/javascript" src="js/angular.js"></script>
    <script src="https://cdn.firebase.com/v0/firebase.js"></script>
    <script src="https://cdn.firebase.com/libs/angularfire/0.5.0/angularfire.js"></script>
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <script type="application/javascript" src="js/angular-letters.js"></script>
</head>
<body>
<div class="container" data-ng-controller="lettersCtrl">
    <div class="navbar navbar-fixed-top row">
        <div class="col-md-offset-4 col-md-4">
        <div class="btn-group">
            <button type="button" class="btn btn-sm btn-success" data-ng-click="saveToFireBase()">Save to database</button>
            <button type="button" class="btn btn-sm btn-warning" data-ng-click="loadFromFireBase()">Load from database</button>
        </div>
        </div>
    </div>

    <div class="panel-heading" data-ng-init="loadFromLocalStorage()">
        <h2>Take a {{bit}}-letter long order.</h2>
    </div>

    <form class="form-horizontal">
        <div class="form-group ">
            <label for="usertext">Enter your text...</label>
            <textarea autofocus id="usertext" data-ng-model="linkedText" data-ng-model-instant class="form-control"
                      rows="2"></textarea>
        </div>

        <label>...and choose letters. <span class="label label-info">{{currentLetters.length}}</span> orders now
            available!</label>

        <div class="row">
            <button type="button" onclick="document.getElementById('usertext').focus()"
                    class="col-sm-1 btn btn-lg btn-default" data-ng-repeat="letter in showLetters"
                    data-ng-click="takeLetter(letter)">{{letter}}
            </button>
        </div>
    </form>

    <div class="row">
        <div data-ng-if="currentLetters.length==0" class="col-sm-12 btn btn-warning btn-lg"
             data-ng-click="refillLetters()">Add letters!
        </div>
    </div>

    <h5>You have <span class="label label-primary">{{myLetters.length}}</span> orders.</h5>

    <h3>Your orders:</h3>

    <div class="panel row btn-toolbar">
        <button onclick="document.getElementById('usertext').focus()" class="btn btn-default" data-ng-click="restart()">
            Restart
        </button>
    </div>
    <div class="row">
        <div class="btn-toolbar col-md-7">
            <button data-ng-repeat="obj in myLetters track by obj.letter" class="btn-xs btn {{getButtonStatus(obj)}}"
                    data-ng-click="selectOrder(obj)">{{obj.letter}}
            </button>
        </div>
        <div class="col-md-5 well" data-ng-if="selectedOrder">
            <button class="btn-lg btn {{getButtonStatus(selectedOrder)}}">{{selectedOrder.letter}}</button>
            {{selectedOrder.text}}
        </div>
    </div>

</div>
</body>
</html>