<!DOCTYPE html>
<html data-ng-app="fruitTree">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

    <title>Letters</title>
    <script src="js/angular.js"></script>
    <script src="https://cdn.firebase.com/v0/firebase.js"></script>
    <script src="https://cdn.firebase.com/libs/angularfire/0.5.0/angularfire.js"></script>
    <script type="application/javascript" src="js/angular-letters.js"></script>
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/letters.css" rel="stylesheet">
    <script src="js/angular-deckgrid.js"></script>
 <!-- Masonry script seemed a little bit difficult because of a need to re-layout on element add.

   <script src="js/masonry.pkgd.min.js"></script>
    <script>
        docReady( function() {

            var container = document.querySelector('#sayings-container');
            var msnry = new Masonry( container, {
                columnWidth: 200
            });
            msnry.layout();
        });

    </script>
    -->


</head>
<body>
<div class="container" id="fruit" data-ng-controller="lettersCtrl">
    <div class="navbar navbar-fixed-top row">
        <div class="col-md-offset-2 col-md-8">
            Total <span class="label label-primary">{{root.sayings.length}}</span> sayings.
        <div class="btn-group">
            <button type="button" class="btn btn-sm btn-success" data-ng-click="saveToFireBase()">Save to database</button>
            <button type="button" class="btn btn-sm btn-warning" data-ng-click="loadFromFireBase()">Load from database</button>
            <button onclick="document.getElementById('usertext').focus()" class="btn btn-sm btn-danger" data-ng-click="reset()">Restart</button>
        </div>
        </div>
    </div>

    <h3>Создай:</h3>
    {{width}}
    <div data-ng-init="hidden=true" class="navbar-static-top panel panel-footer saypanel">
        <div class="btn-group">
        <button data-ng-click="$parent.hidden=!$parent.hidden" data-ng-repeat="type in types" class="btn btn-default">{{type}}</button>
        </div><br><br><br>
        <div data-ng-hide="hidden" class="tab-content">
            <form class="form-horizontal" data-ng-submit="takeLetter(popLetter)">
                <div class="form-group ">
                    <label for="usertext">Enter your text... <span class="label label-info">{{140 - linkedText.length}}</span> symbols to be shown, the least to be hidden. </label>
                    <textarea autofocus id="usertext" data-ng-model="linkedText" class="form-control"
                              rows="2"></textarea>
                </div>

                <label>...and choose letters. <span class="label label-info">{{root.freeOrders.length}}</span> orders now
                    available!</label>

                <div class="row say-buttons">
                    <button type="button" onclick="document.getElementById('usertext').focus()"
                            class="btn btn-lg  color-{{getColor(order)}}"
                            data-ng-repeat="order in root.freeOrders | limitTo: 12"
                            data-ng-click="root.say(order,linkedText)"
                            data-ng-disabled="!linkedText">{{order}}
                    </button>
                </div>
            </form>


        </div>
    </div>


    <div>
    Columns: <input data-ng-init="cols=4" type="range" defa min="1" max="{{colsmax}}" data-ng-model="cols" data-ng-model-instant>
    <span class="label label-default">{{cols}}</span>
    </div>
<!-- Columns layout made with CSS columns ONLY! For further analysis.

    <div class="row sayings">
        <div class="col-md-10 col-md-offset-1 row" >
        <div id="sayings-container">
            <div data-ng-repeat="saying in sayings track by $id(saying)" class="square border-color-{{getColor(saying.letter)}}">
                <span class="label color-{{getColor(saying.letter)}}">{{saying.letter}}</span>
                {{saying.text}}

            </div>
        </div>
        </div>
    </div>

HERE IS THE CSS
<style>
#sayings-container {
    -moz-column-count: 3;
    -moz-column-gap: 10px;
    -webkit-column-count: 3;
    -webkit-column-gap: 10px;
    column-count: 3;
    column-gap: 10px;
    display:block;
    clear:both;
    width:100%;

}

.sayings {
    margin-bottom: 300px;
}
.square {
    display:inline-block;
    width:99%%;
    padding:6px;
    border: solid 6px #ccc;
    margin: 4px 4px;
    overflow: hidden;
</style>

-->

<!-- DECKGRID

    <div class="row sayings">
        <div class="col-md-10 col-md-offset-1" id="sayings-container">

            <div deckgrid source="root.sayings" cardTemplate="js/saying.html" class="deckgrid"></div>

         </div>
    </div>

-->

<!-- Just a description list as the first version.
    <div class="row">
        <div class="col-md-7">
            <dl class="dl-horizontal">
                <dt data-ng-repeat-start="why in sayings track by why.letter"><span class="label label-{{getButtonStatus(why)}}">{{why.letter}}</span></dt>
                <dd data-ng-repeat-end=""> {{why.text}}</dd>

            </dl>
        </div>
    </div>
-->


    <div class="row sayings">
        <div class="" id="sayings-container">
        <div
            data-ng-init="card.select=''"
            data-ng-style="{width:100/cols-2+'%'}"
            data-ng-repeat="card in root.sayings | orderBy:root.ratingSort"
            data-ng-class="card.select"
            class="box hover-back-{{getColor(card.order)}} border-color-{{getColor(card.order)}}">

            <div  data-ng-show="card.select == ''" data-ng-click="card.select='color-'+getColor(card.order);" class="pane-label hover-back-{{getColor(card.order)}}">
                | {{card.order}} |
            </div>
            <div  data-ng-class="card.select" data-ng-hide="card.select == ''" data-ng-click="card.select=''" class="pane-label hover-back-{{getColor(card.order)}}">
                | {{card.order}} |
            </div>



        <div class="rating">
            <span data-ng-show="root[card.order].getRating()<0" data-ng-click="root[card.order].rate('-')" class="label label-danger">{{root[card.order].getRating()}}</span>
            <span data-ng-hide="root[card.order].getRating()<0" data-ng-click="root[card.order].rate('-')" class="minus label label-danger">-</span>
            <span data-ng-click="root[card.order].rate('0')" class="zero label label-default">{{root[card.order].getTotal() || 0}}</span>
            <span data-ng-show="root[card.order].getRating()>0" data-ng-click="root[card.order].rate('+')" class="label label-success">+{{root[card.order].getRating()}}</span>
            <span data-ng-hide="root[card.order].getRating()>0" data-ng-click="root[card.order].rate('+')" class="plus label label-success">+</span>
        </div>



            <div data-ng-if="!card.more" class="saying-text">
                {{card.text.substring(0,140)}}<span ng-if="card.text.length>139">...</span>
            </div>
            <div data-ng-if="card.more" class="saying-text">
                {{card.text}}
            </div>

            <div data-ng-if="card.text.length > 140 && !card.more"
                 data-ng-click="card.more = true"
                 class="corner">
                <div class="more">+</div>
            </div>
            <div data-ng-if="card.more"
                 data-ng-click="card.more = false"
                 class="corner">
                <div class="less">-</div>
            </div>

        </div>
        </div>
    </div>




</div>
</body>
</html>