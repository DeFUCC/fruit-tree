<!DOCTYPE html>
<html data-ng-app="fruitTree">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

    <title>Letters</title>
    <script src="js/angular.js"></script>
    <script src="https://cdn.firebase.com/v0/firebase.js"></script>
    <script src="https://cdn.firebase.com/libs/angularfire/0.5.0/angularfire.js"></script>
    <script type="application/javascript" src="js/angular-letters.js"></script>
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/letters.css" rel="stylesheet">
    <script src="js/angular-deckgrid.js"></script>
 <!-- Masonry script seemed a little bit difficult because of a need to re-layout on element add.

   <script src="js/masonry.pkgd.min.js"></script>
    <script>
        docReady( function() {

            var container = document.querySelector('#sayings-container');
            var msnry = new Masonry( container, {
                columnWidth: 200
            });
            msnry.layout();
        });

    </script>
    -->

</head>
<body>
<div class="container" data-ng-controller="lettersCtrl" data-ng-init="loadFromLocalStorage();shuffleLetters()">
    <div class="navbar navbar-fixed-top row">
        <div class="col-md-offset-2 col-md-8">
            Total <span class="label label-primary">{{myLetters.length}}</span> sayings.
        <div class="btn-group">
            <button type="button" class="btn btn-sm btn-success" data-ng-click="saveToFireBase()">Save to database</button>
            <button type="button" class="btn btn-sm btn-warning" data-ng-click="loadFromFireBase();saveToLocalStorage();">Load from database</button>
            <button onclick="document.getElementById('usertext').focus()" class="btn btn-sm btn-danger" data-ng-click="restart()">Restart</button>
        </div>
        </div>
    </div>

    <h3>Sayings:</h3>
<!-- Columns layout made with CSS columns ONLY! For further analysis.

    <div class="row sayings">
        <div class="col-md-10 col-md-offset-1 row" >
        <div id="sayings-container">
            <div data-ng-repeat="saying in myLetters track by $id(saying)" class="square border-color-{{armColor(saying.letter)}}">
                <span class="label color-{{armColor(saying.letter)}}">{{saying.letter}}</span>
                {{saying.text}}

            </div>
        </div>
        </div>
    </div>

HERE IS THE CSS
<style>
#sayings-container {
    -moz-column-count: 3;
    -moz-column-gap: 10px;
    -webkit-column-count: 3;
    -webkit-column-gap: 10px;
    column-count: 3;
    column-gap: 10px;
    display:block;
    clear:both;
    width:100%;

}

.sayings {
    margin-bottom: 300px;
}
.square {
    display:inline-block;
    width:99%%;
    padding:6px;
    border: solid 6px #ccc;
    margin: 4px 4px;
    overflow: hidden;
</style>

-->



    <div class="row sayings">
        <div class="col-md-10 col-md-offset-1" id="sayings-container">

            <div deckgrid source="myLetters" cardTemplate="js/saying.html" class="deckgrid"></div>

         </div>
    </div>

<!-- Just a description list as the first version.
    <div class="row">
        <div class="col-md-7">
            <dl class="dl-horizontal">
                <dt data-ng-repeat-start="why in myLetters track by why.letter"><span class="label label-{{getButtonStatus(why)}}">{{why.letter}}</span></dt>
                <dd data-ng-repeat-end=""> {{why.text}}</dd>

            </dl>
        </div>
    </div>
-->

    <!-- DECKGRID!
    <div class="row sayings">
        <div class="col-md-10 col-md-offset-1" id="sayings-container">
        <div data-ng-repeat="card in myLetters | orderBy:sortByRating" class="box border-color-{{armColor(card.letter)}}">

        <div class="pane-label hover-back-{{armColor(card.letter)}}">
            {{card.letter}}
        </div>

        <div class="rating">
            <span data-ng-show="rate.getRating(card.letter)<0" data-ng-click="rate.minus(card.letter)" class="label label-danger">{{rate.getRating(card.letter)}}</span>
            <span data-ng-hide="rate.getRating(card.letter)<0" data-ng-click="rate.minus(card.letter)" class="minus label label-danger">-</span>
            <span data-ng-click="rate.zero(card.letter)" class="zero label label-default">{{rate.getTotal(card.letter) || 0}}</span>
            <span data-ng-show="rate.getRating(card.letter)>0" data-ng-click="rate.plus(card.letter)" class="label label-success">+{{rate.getRating(card.letter)}}</span>
            <span data-ng-hide="rate.getRating(card.letter)>0" data-ng-click="rate.plus(card.letter)" class="plus label label-success">+</span>
        </div>



        <div class="saying-text">
            {{card.text.substring(0,140)}}<span data-ng-if="card.text.length > 140 && !card.more">...<button class="btn btn-xs marker hover-back-{{armColor(card.letter)}}" data-ng-click="card.more = card.text.substring(140)">...</button></span><span data-ng-if="card.more">{{card.more}}<br><button class="btn btn-xs marker hover-back-{{armColor(card.letter)}}" data-ng-click="card.more = undefined">^</button></span>
        </div>


        </div>
        </div>
    </div>
-->
    <div data-ng-init="hidden=true" class="navbar-fixed-bottom panel panel-footer saypanel">
        <button data-ng-show="hidden" data-ng-click="hidden=false" class="handle btn btn-success">+</button>
        <button data-ng-hide="hidden" data-ng-click="hidden=true" class="handle btn btn-warning">-</button>
    <div data-ng-hide="hidden">
        <form class="form-horizontal" data-ng-submit="takeLetter(popLetter)">
        <div class="form-group ">
            <label for="usertext">Enter your text... <span class="label label-info">{{140 - linkedText.length}}</span> symbols to be shown, the least to be hidden. </label>
            <textarea autofocus id="usertext" data-ng-model="linkedText" class="form-control"
                      rows="2"></textarea>
        </div>

        <label>...and choose letters. <span class="label label-info">{{currentLetters.length}}</span> orders now
            available!</label>

        <div class="row">
            <button type="submit" onclick="document.getElementById('usertext').focus()"
                    class="col-sm-1 btn btn-lg  color-{{armColor(popLetter)}}"
                    data-ng-if="currentLetters.length!=0"
                    data-ng-click="takeLetter(popLetter)"
                    data-ng-disabled="!linkedText">{{popLetter}}
            </button>
            <button type="button" onclick="document.getElementById('usertext').focus()"
                    class="col-sm-1 btn btn-lg  color-{{armColor(letter)}}"
                    data-ng-repeat="letter in showLetters"
                    data-ng-click="takeLetter(letter)"
                    data-ng-disabled="!linkedText">{{letter}}
            </button>
        </div>
    </form>

    <div class="row">
        <div data-ng-if="currentLetters.length==0" class="col-sm-12 btn btn-warning btn-lg"
             data-ng-click="refillLetters()">Add letters!
        </div>
    </div>
    </div>
</div>

</div>
</body>
</html>